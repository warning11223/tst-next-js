# Каталог видео

![TypeScript](https://img.shields.io/badge/TypeScript-5.9.3-orange)
![Next](https://img.shields.io/badge/Next-16.0.0-orange)
![Tailwind](https://img.shields.io/badge/Tailwind-4.1.16-orange)

## Технологии

- NextJS
- Typescript
- Tailwind CSS
- Tanstack/react-query

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone https://github.com/warning11223/tst-next-js
```
2. Перейдите в директорию проекта:
```bash
cd tst-next-js
```

3. Установите зависимости:
```bash
npm install
```

4. Запустите приложение:
```bash
npm run dev
```
Приложение будет доступно по адресу: http://localhost:3000

5. Что можно улучшить?
```
Сортировка:
Сейчас видео сортируются только по дате (новые сверху). 
Для реализации дополнительной сортировки я бы добавил dropdown компонент с вариантами: 
"Дата: новые → старые", "Дата: старые → новые", "Название: А-Я", "Название: Я-А", "Длительность: короткие → длинные", "Длительность: длинные → короткие". 
В состоянии компонента VideoGrid создал бы новый useState для хранения выбранного типа сортировки (например, 'date-desc' | 'date-asc' | 'title-asc' и т.д.). 
Добавил бы функцию sortVideos в lib/utils/video.ts, которая принимает массив видео и тип сортировки, а возвращает отсортированный массив через switch-case или объект с функциями сортировки. 
В useMemo, где происходит фильтрация, добавил бы вызов sortVideos перед фильтрами, чтобы сортировка применялась первой. 
Выбранный тип сортировки сохранял бы в URL параметры (например, ?sort=title-asc) через useEffect и router.replace, чтобы состояние сохранялось при обновлении страницы.
Для сортировки по названию использовал бы метод localeCompare с параметром 'ru' для корректной работы с кириллицей. 
Для дат сравнивал бы через getTime() после преобразования в Date объекты, а для длительности — просто числовое сравнение через durationSec. 
В UI разместил бы dropdown рядом с фильтром длительности в одной строке на desktop и в отдельной строке на mobile для лучшей адаптивности. 
Добавил бы визуальный индикатор активной сортировки (иконку стрелки) и счётчик результатов под фильтрами. 
При изменении сортировки можно добавить плавную анимацию перестроения сетки через CSS transitions или framer-motion для более приятного UX.
```

```
Тестирование поиска:
Убедиться, что компонент правильно отображается на странице, включая поле ввода и кнопку поиска или список результатов.
Убедиться, что при вводе текста в поле поиска, значение обновляется корректно. Это можно протестировать с помощью fireEvent.change.
Если компонент вызывает функцию поиска при изменении ввода, можно протестировать, что эта функция вызывается с правильным значением.
Если результаты поиска появляются после выполнения запроса, можно протестировать, что список результатов рендерится правильно.

Тестирование хука useFilters:
Для тестирования кастомных хуков можно использовать библиотеку @testing-library/react-hooks. 
Проверить, что хук правильно инициализирует состояние.
Проверить, что хук корректно обновляет состояние фильтров при изменении параметров.
Если хук запускает какие-то побочные эффекты, можно протестировать, что этот эффект происходит при изменении состояния.
Можно протестировать, что хук правильно обрабатывает различные значения фильтров.
```

```
Также установил revalidate = 0 и убрал кеширование, для эмулирования ошибки на продакшене. 
Перенес запрос с клиента на сервер, так как список видео должен быть доступен в исходном HTML (SSR) и скрыл скелетоны, так как контент отображается сразу при SSR. 
```